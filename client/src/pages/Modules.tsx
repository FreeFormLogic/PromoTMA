import { useState } from "react";
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { ModuleModal } from "@/components/ModuleModal";
import { 
  Grid3X3, Filter, Building2, Search, ArrowRight, ShoppingCart, BarChart3, Gift,
  GraduationCap, Calendar, DollarSign, FileText, Zap, Users, Star, Eye, Heart,
  Target, Shield, Settings, Bell, Cloud, Database, Camera, Video, Headphones,
  CreditCard, Package, Warehouse, Bot, Link, BookOpen, UserCheck, Group, Milestone, 
  Trophy, Ticket, Puzzle, Repeat, History, Baseline, TestTube2, Mail, Users2,
  MousePointerClick, Library, Aperture, Presentation, PenTool, ClipboardCheck, Briefcase, MessageSquare,
  Globe, QrCode, Lock, HandCoins, MessageCircleQuestion, Share2, Component, LayoutDashboard, Car,
  Utensils, BedDouble, Plane, Handshake, ShieldCheck, Code2, Webhook, FileOutput
} from "lucide-react";

// Полный и корректный список ВСЕХ 102 модулей
const allModules = [
    // E-COMMERCE (15 Модулей)
    {
        id: 'ecommerce-ai-showcase',
        category: 'E-COMMERCE',
        title: 'Витрина товаров с AI-описаниями и умными фильтрами',
        description: 'Революционное решение для каталогизации и презентации товаров в Telegram Mini App, значительно повышающее конверсию.',
        features: [
            "Нейросетевые описания товаров: Автоматическая генерация продающих текстов с настройкой тональности (Tone of Voice) на основе характеристик.",
            "Интеллектуальная система фильтрации: Более 20 типов фильтров (фасетные, по диапазону, цвету) с автоадаптацией релевантности для каждой категории.",
            "Визуальный поиск: Поиск по фотографии из чата Telegram с точностью распознавания до 95%, работает на базе алгоритмов компьютерного зрения.",
            "Динамический каталог: Автоматическое ранжирование товаров на основе популярности, сезонных трендов и персональных предпочтений.",
            "Персонализация витрины: Адаптация ассортимента под интересы пользователя на основе его активности в Mini App (просмотры, добавления в корзину)."
        ]
    },
    {
        id: 'ecommerce-product-card-360',
        category: 'E-COMMERCE',
        title: 'Карточка товара с 360° галереей и видео-обзорами',
        description: 'Интерактивная презентация товаров нового поколения для максимального вовлечения покупателей в Telegram.',
        features: [
            "3D-просмотр товаров: Интерактивное вращение на 360° с плавным масштабированием, оптимизированное для быстрой загрузки.",
            "Видео-демонстрации: Встроенный плеер для просмотра обзоров и инструкций без выхода из Telegram с адаптацией качества видео.",
            "HD-зуммирование: Детальное рассмотрение фактуры материалов и деталей с 20-кратным увеличением.",
            "AR-примерка: Визуализация мебели, одежды и аксессуаров в реальном пространстве через камеру устройства.",
            "Интерактивные хотспоты: Выделение и описание ключевых особенностей товара в интерактивном режиме для изучения продукта.",
            "Интеграция с отзывами: Отображение фото и видео от клиентов прямо в галерее."
        ]
    },
    {
        id: 'ecommerce-persistent-cart',
        category: 'E-COMMERCE',
        title: 'Корзина с сохранением между сессиями',
        description: 'Интеллектуальная система управления процессом покупки в Telegram, существенно сокращающая количество брошенных корзин.',
        features: [
            "Синхронизация с аккаунтом Telegram: Мгновенное сохранение и восстановление состава корзины при повторном открытии Mini App.",
            "Облачное хранение данных: Сохранение содержимого корзины до 30 дней для авторизованных пользователей Telegram.",
            "Восстановление прерванных сессий: Автоматическое восстановление состава корзины после закрытия приложения или перезагрузки.",
            "Интеллектуальные напоминания: Персонализированные уведомления о незавершенных покупках через личные сообщения Telegram.",
            "Аналитика поведения: Выявление паттернов, приводящих к отказу от покупки, для оптимизации воронки продаж."
        ]
    },
    {
        id: 'ecommerce-payment-gateway',
        category: 'E-COMMERCE',
        title: 'Автоматический прием платежей',
        description: 'Универсальная платежная экосистема для Telegram Mini Apps с максимальным охватом методов оплаты и встроенной защитой.',
        features: [
            "Интеграция с Telegram Payments: Быстрая оплата через встроенные методы без перехода на сторонние сайты.",
            "Мультиплатформенный прием платежей: Поддержка 15+ способов, включая карты, электронные кошельки, СБП и Telegram Stars.",
            "Защита от мошенничества: Многоуровневая система безопасности с ML-алгоритмами для выявления подозрительных операций.",
            "Автоматические возвраты: Мгновенная обработка возвратов и частичных возмещений с минимальным участием менеджера.",
            "Умные платежные формы: Адаптивный дизайн с минимизацией полей для быстрой оплаты прямо в Telegram.",
            "Фискализация чеков: Автоматическая отправка данных в налоговую службу."
        ]
    },
    {
        id: 'ecommerce-order-tracking',
        category: 'E-COMMERCE',
        title: 'Система статусов заказов с real-time трекингом',
        description: 'Прозрачная система мониторинга движения заказов от оформления до получения через Telegram.',
        features: [
            "Детализированный процесс статусов: 8-10 настраиваемых этапов обработки заказа с уведомлениями.",
            "GPS-трекинг курьеров: Отображение текущего местоположения курьера на карте с прогнозом времени прибытия.",
            "Предиктивная аналитика доставки: Расчет точного времени с учетом загруженности дорог и статистики.",
            "Мгновенные уведомления: Автоматическая отправка сообщений о смене статуса заказа через Telegram Bot.",
            "Интеграция с логистическими сервисами: Автополучение трек-номеров и статусов от транспортных компаний.",
            "Фотоотчет о доставке: Возможность для курьера прикрепить фото доставленного заказа."
        ]
    },
    {
        id: 'ecommerce-delivery-management',
        category: 'E-COMMERCE',
        title: 'Управление доставкой с СДЭК, Boxberry, Почтой России',
        description: 'Комплексная автоматизация логистических процессов для Telegram Mini App магазина.',
        features: [
            "Единый интерфейс управления: Централизованное управление отправками через разные службы из админ-панели.",
            "Автоматический расчет стоимости: Мгновенное определение оптимального способа доставки по стоимости и срокам.",
            "Печать документов: Автоматическое формирование и печать этикеток, накладных и сопроводительных документов.",
            "Трекинг отправлений: Отслеживание статусов доставки с автоматическим обновлением информации в Telegram.",
            "Интеграция с маркетплейсами: Синхронизация заказов из Mini App с Wildberries, Ozon, Яндекс.Маркет."
        ]
    },
    {
        id: 'ecommerce-ar-try-on',
        category: 'E-COMMERCE',
        title: 'Виртуальная примерка AR',
        description: 'Инновационная технология дополненной реальности для Telegram Mini Apps, повышающая конверсию покупок.',
        features: [
            "Бесшовная AR-интеграция: Работа через Telegram Mini App без необходимости установки дополнительных приложений.",
            "Высокоточное распознавание: Автоматическое определение размеров тела и лица пользователя с точностью до 98%.",
            "Реалистичная визуализация: Точная передача фактуры, цвета и поведения материалов в дополненной реальности.",
            "Фотофиксация примерки: Возможность сохранения и отправки фотографий товара в интерьере или на себе.",
            "Мультитоварная примерка: Одновременная визуализация нескольких товаров для создания комплектов.",
            "Совместимость с каталогом: Легкая интеграция AR-моделей в существующие карточки товаров."
        ]
    },
    {
        id: 'ecommerce-promo-codes',
        category: 'E-COMMERCE',
        title: 'Система промокодов и автоматических скидок',
        description: 'Мощный инструмент стимулирования продаж через гибкие механизмы ценообразования в Telegram Mini App.',
        features: [
            "Многоуровневые скидки: Создание сложных правил скидок с комбинированием различных условий активации.",
            "Временные ограничения: Настройка промокодов с точным периодом действия и автоматическими уведомлениями.",
            "Персональные предложения: Генерация уникальных одноразовых промокодов для конкретных пользователей Telegram.",
            "Автоматические скидки: Применение скидок на основе состава корзины, истории покупок и поведения пользователя.",
            "Защита от злоупотреблений: Интеллектуальная система предотвращения мошенничества с промокодами.",
            "Генерация скидок для партнеров: Создание уникальных промокодов для инфлюенсеров и партнеров."
        ]
    },
    {
        id: 'ecommerce-cross-sell',
        category: 'E-COMMERCE',
        title: 'Кросс-продажи с умными рекомендациями',
        description: 'Интеллектуальная система увеличения среднего чека через персонализированные предложения в Telegram.',
        features: [
            "Алгоритмы машинного обучения: Анализ покупательских паттернов для выявления неочевидных связей между товарами.",
            "Контекстные рекомендации: Динамическое изменение предложений в зависимости от этапа покупки и состава корзины.",
            "Персонализированная выдача: Формирование рекомендаций на основе предыдущих покупок и просмотров пользователя.",
            "Автоматические комплекты: Создание готовых наборов товаров со специальной ценой для увеличения объема покупки.",
            "A/B тестирование стратегий: Автоматический подбор оптимальных алгоритмов рекомендаций для разных категорий товаров."
        ]
    },
    {
        id: 'ecommerce-one-click-reorder',
        category: 'E-COMMERCE',
        title: 'Быстрый повтор заказа в один клик',
        description: 'Инструмент повышения частоты повторных покупок в Telegram Mini App за счет максимального упрощения процесса.',
        features: [
            "Шаблоны заказов: Сохранение истории заказов с возможностью быстрого повторения в один клик.",
            "Умные напоминания: Автоматическое определение оптимального момента для напоминания о повторной покупке через Telegram Bot.",
            "Предзаполненные формы: Сохранение всех данных для оформления без повторного ввода адреса и способа оплаты.",
            "Расходные материалы: Интеллектуальное отслеживание периодичности заказов расходников с предложением пополнения.",
            "Экспресс-доставка: Приоритетная обработка повторных заказов с минимальным временем доставки."
        ]
    },
    {
        id: 'ecommerce-group-buying',
        category: 'E-COMMERCE',
        title: 'Групповые покупки со скидками',
        description: 'Социальный механизм продаж с прогрессивным снижением цены для групп пользователей Telegram.',
        features: [
            "Динамическое ценообразование: Автоматическое снижение цены при достижении пороговых значений участников.",
            "Таймеры обратного отсчета: Создание ощущения срочности с ограниченным временем на сбор группы.",
            "Интеграция с Telegram: Инструменты для приглашения друзей через групповые чаты и каналы одним нажатием.",
            "Прозрачный прогресс: Наглядное отображение текущего статуса группы и необходимого количества участников.",
            "Автоматические уведомления: Информирование участников о статусе групповой покупки через Telegram Bot."
        ]
    },
    {
        id: 'ecommerce-pre-orders',
        category: 'E-COMMERCE',
        title: 'Предзаказы и резервирование товаров',
        description: 'Система управления дефицитным товаром для Telegram Mini App.',
        features: [
            "Управление ожиданиями: Возможность резервирования товара до его поступления на склад прямо через Telegram.",
            "Частичная предоплата: Блокирование части стоимости для гарантии серьезности намерений через Telegram Payments.",
            "Приоритетное распределение: Интеллектуальная очередь при ограниченной партии товара для пользователей Telegram.",
            "Фиксация цены: Гарантия сохранения стоимости товара при оформлении предзаказа в Mini App.",
            "Прогнозирование спроса: Аналитика интереса к товарам для оптимизации закупок на основе активности в Telegram."
        ]
    },
    {
        id: 'ecommerce-wishlist',
        category: 'E-COMMERCE',
        title: 'Wishlist с уведомлениями о скидках',
        description: 'Персонализированный инструмент для отложенных покупок в Telegram с автоматическим мониторингом цен.',
        features: [
            "Управление списком желаний: Создание и организация товаров по категориям и приоритетам в Mini App.",
            "Отслеживание цен: Автоматический мониторинг изменений стоимости с уведомлением о снижении цены через Telegram Bot.",
            "Алерты о доступности: Мгновенные оповещения в Telegram о появлении товара в наличии.",
            "Публичные вишлисты: Возможность поделиться списком с друзьями в Telegram для подарков или групповых покупок.",
            "Аналитика популярности: Выявление наиболее желаемых товаров для оптимизации маркетинговых активностей."
        ]
    },
    {
        id: 'ecommerce-product-comparison',
        category: 'E-COMMERCE',
        title: 'Сравнение товаров с детальными характеристиками',
        description: 'Инструмент принятия взвешенных решений при выборе товаров в Telegram Mini App.',
        features: [
            "Интерактивные таблицы сравнения: Наглядное сопоставление до 10 товаров одновременно в компактном интерфейсе.",
            "Умная категоризация характеристик: Автоматическое выделение ключевых параметров для конкретной категории.",
            "Визуализация различий: Цветовое кодирование отличий для быстрой идентификации преимуществ.",
            "Фильтрация параметров: Возможность скрывать одинаковые характеристики для фокуса на различиях.",
            "Сохранение и экспорт: Возможность сохранить результаты сравнения и поделиться ими в чатах Telegram."
        ]
    },
    {
        id: 'ecommerce-erp-integration',
        category: 'E-COMMERCE',
        title: 'Интеграция с 1С, WooCommerce, Shopify',
        description: 'Бесшовная синхронизация данных между Telegram Mini App и популярными системами управления торговлей.',
        features: [
            "Двусторонняя синхронизация: Автоматический обмен данными о товарах, ценах, остатках и заказах.",
            "Мультиканальные продажи: Единый центр управления товарами для Telegram и других площадок.",
            "Автоматизация документооборота: Формирование необходимых документов для бухгалтерии.",
            "Гибкое расписание синхронизации: Настройка частоты обновления данных под нужды конкретного бизнеса.",
            "Обработка исключений: Интеллектуальная система разрешения конфликтов при несоответствии данных."
        ]
    },
    // МАРКЕТИНГ (14 Модулей)
    {
        id: 'marketing-ai-personalization',
        category: 'МАРКЕТИНГ',
        title: 'AI-персонализация с умными рекомендациями',
        description: 'Продвинутая система машинного обучения, создающая уникальный опыт для каждого клиента в Telegram Mini App.',
        features: [
            "Комплексный анализ поведения: Обработка более 50 факторов взаимодействия (клики, время на странице, история покупок).",
            "Динамическая персонализация: Автоматическая адаптация контента, товарных подборок и интерфейса под каждого пользователя.",
            "Предиктивные рекомендации: Прогнозирование потенциального интереса к товарам с точностью до 85% на основе ML-моделей.",
            "Многоуровневая сегментация: Распределение пользователей по микросегментам для гипертаргетированных кампаний.",
            "Самообучающиеся алгоритмы: Постоянное улучшение качества рекомендаций на основе обратной связи и результатов."
        ]
    },
    {
        id: 'marketing-analytics-dashboard',
        category: 'МАРКЕТИНГ',
        title: 'Дашборд бизнес-аналитики с real-time метриками',
        description: 'Комплексное решение для визуализации и анализа ключевых показателей Telegram Mini App.',
        features: [
            "Всеобъемлющая аналитика: 15+ готовых отчетов (продажи, LTV, CAC, Retention) с настраиваемыми параметрами.",
            "Мониторинг в реальном времени: Отображение ключевых показателей активности в Telegram с минимальной задержкой.",
            "Многоуровневые воронки конверсии: Детальный анализ пути пользователя с выявлением проблемных этапов.",
            "Когортный анализ: Сегментация пользователей по времени привлечения для оценки долгосрочной ценности (LTV).",
            "Предиктивная аналитика: Прогнозирование будущих показателей на основе исторических данных и трендов."
        ]
    },
    {
        id: 'marketing-geo-push',
        category: 'МАРКЕТИНГ',
        title: 'Гео-таргетированные push-уведомления',
        description: 'Система точечных коммуникаций с пользователями Telegram на основе их физического местоположения.',
        features: [
            "Геофенсинг: Создание виртуальных зон (например, вокруг магазина) для активации уведомлений при входе пользователя.",
            "Гиперлокальный таргетинг: Отправка уведомлений с точностью до 50 метров от заданной точки.",
            "Контекстная релевантность: Адаптация сообщений на основе локации, времени суток и погодных условий.",
            "Поведенческие триггеры: Комбинация геолокационных данных с историей взаимодействия для повышения релевантности.",
            "Аналитика эффективности: Детальная статистика по открываемости и конверсии для разных географических зон."
        ]
    },
    {
        id: 'marketing-ab-testing',
        category: 'МАРКЕТИНГ',
        title: 'A/B тестирование интерфейсов и контента',
        description: 'Научный подход к оптимизации конверсии Telegram Mini App через экспериментальную проверку гипотез.',
        features: [
            "Многовариантное тестирование: Одновременное сравнение до 10 версий элементов интерфейса или контента.",
            "Статистическая достоверность: Автоматический расчет необходимого размера выборки и определение победителя.",
            "Таргетированные эксперименты: Возможность тестирования на определенных сегментах аудитории Telegram (новички, постоянные клиенты).",
            "Визуальный редактор: Создание вариаций без необходимости привлечения программистов.",
            "Комплексная аналитика: Оценка влияния изменений не только на конверсию, но и на ключевые бизнес-показатели."
        ]
    },
    {
        id: 'marketing-sales-funnels',
        category: 'МАРКЕТИНГ',
        title: 'Воронки продаж с детекцией аномалий',
        description: 'Продвинутый инструмент для анализа пути клиента в Telegram Mini App и выявления проблемных мест.',
        features: [
            "Многоэтапные воронки: Визуализация всего пути клиента от первого касания до повторных покупок.",
            "Автоматическое выявление аномалий: Моментальное обнаружение нетипичных отклонений в конверсии на любом этапе.",
            "Предиктивный анализ: Прогнозирование ожидаемых показателей для своевременного выявления проблем.",
            "Сравнительный анализ: Сопоставление эффективности воронок для различных сегментов, каналов и периодов.",
            "Рекомендации по оптимизации: Автоматическое формирование предложений по устранению узких мест в воронке."
        ]
    },
    {
        id: 'marketing-retargeting',
        category: 'МАРКЕТИНГ',
        title: 'Ретаргетинг и ремаркетинг кампании',
        description: 'Комплексное решение для возврата заинтересованных пользователей в Telegram Mini App.',
        features: [
            "Таргетированные сообщения в Telegram: Обращение к пользователям, которые взаимодействовали с Mini App, но не завершили действие.",
            "Динамический ретаргетинг: Персонализированные сообщения с конкретными товарами, которые пользователь просматривал.",
            "Интеллектуальная сегментация: Разделение аудитории по глубине интереса и стадии воронки для разных стратегий.",
            "Оптимальный тайминг: Автоматический подбор времени контакта с максимальной вероятностью возврата.",
            "Ограничение частоты: Защита от чрезмерного давления на пользователя с автоматической регуляцией частоты."
        ]
    },
    {
        id: 'marketing-email-sms-automation',
        category: 'МАРКЕТИНГ',
        title: 'Email/SMS автоматизация с триггерами',
        description: 'Интеллектуальная система омниканальных коммуникаций для Telegram Mini App.',
        features: [
            "Интеграция с Telegram Bot: Синхронизация триггерных сообщений между Telegram, email и SMS для целостной стратегии.",
            "Обширная библиотека триггеров: 30+ типов автоматических событий для запуска коммуникаций на основе действий в Mini App.",
            "Сложные сценарии: Создание многоэтапных последовательностей сообщений с разветвлённой логикой.",
            "Персонализированный контент: Динамические элементы и адаптация содержания под каждого получателя.",
            "Предиктивная отправка: Определение оптимального канала и времени для коммуникации с конкретным клиентом."
        ]
    },
    {
        id: 'marketing-social-proof',
        category: 'МАРКЕТИНГ',
        title: 'Социальные доказательства и отзывы клиентов',
        description: 'Комплексный инструмент формирования доверия к Telegram Mini App через демонстрацию опыта реальных клиентов.',
        features: [
            "Интеграция с профилем Telegram: Отображение реальных аватаров и имен пользователей (с их разрешения) для повышения доверия.",
            "Мультиформатные отзывы: Сбор и отображение текстовых, фото- и видеоотзывов реальных клиентов прямо в Mini App.",
            "Виджеты активности: Динамические уведомления о недавних покупках для создания эффекта популярности.",
            "Рейтинги и оценки: Визуализация общего рейтинга товаров и услуг с возможностью фильтрации по оценкам.",
            "Модерация контента: Интеллектуальная фильтрация спама и негатива с сохранением честной обратной связи."
        ]
    },
    {
        id: 'marketing-heatmaps',
        category: 'МАРКЕТИНГ',
        title: 'Тепловые карты поведения пользователей',
        description: 'Визуальный инструмент анализа взаимодействия пользователей с интерфейсом Telegram Mini App.',
        features: [
            "Многоформатная визуализация: Тепловые карты тапов, свайпов, времени взаимодействия и внимания в Mini App.",
            "Сессионная запись: Возможность просмотра полного пути отдельного пользователя по интерфейсу Telegram Mini App.",
            "Агрегированная аналитика: Сводные данные по сотням и тысячам посещений для выявления паттернов.",
            "Сегментация данных: Анализ поведения различных групп пользователей Telegram для сравнения.",
            "Выявление проблем: Автоматическое определение областей с нетипичным поведением пользователей в Mini App."
        ]
    },
    {
        id: 'marketing-audience-segmentation',
        category: 'МАРКЕТИНГ',
        title: 'Сегментация аудитории по поведению',
        description: 'Продвинутая система динамического разделения пользователей Telegram на группы.',
        features: [
            "Поведенческая кластеризация: Автоматическое формирование групп на основе схожих паттернов взаимодействия с Mini App.",
            "RFM-анализ: Сегментация по частоте, давности и денежной ценности покупок в Telegram.",
            "Предиктивная сегментация: Распределение пользователей по прогнозируемой склонности к целевым действиям.",
            "Микротаргетинг: Создание узконаправленных кампаний для сверхмалых сегментов с высокой релевантностью.",
            "Динамические сегменты: Автоматическое обновление состава групп при изменении поведения пользователей Telegram."
        ]
    },
    {
        id: 'marketing-utm-tracking',
        category: 'МАРКЕТИНГ',
        title: 'UTM-метки и трекинг источников трафика',
        description: 'Профессиональная система для точного отслеживания эффективности привлечения пользователей в Telegram Mini App.',
        features: [
            "Комплексная атрибуция: Отслеживание полного пути пользователя от первого контакта до покупки в Mini App.",
            "Отслеживание переходов из каналов: Анализ эффективности различных Telegram-каналов, групп и внешних источников.",
            "Конструктор UTM-ссылок: Визуальный инструмент для создания корректно параметризованных ссылок на ваш Mini App.",
            "Настраиваемые модели атрибуции: Выбор подходящей модели (last click, first click, линейная, временная).",
            "Кросс-девайсная аналитика: Связывание активностей пользователя на разных устройствах в единую историю."
        ]
    },
    {
        id: 'marketing-sales-forecasting',
        category: 'МАРКЕТИНГ',
        title: 'Прогнозная аналитика продаж с AI',
        description: 'Интеллектуальная система предсказания показателей Telegram Mini App для принятия стратегических решений.',
        features: [
            "Высокоточные прогнозы: Предсказание объемов продаж в Mini App с точностью до 90-95% на период 1-3 месяца.",
            "Многофакторный анализ: Учет сезонности, маркетинговых активностей, активности в Telegram и других влияющих факторов.",
            "Сценарное моделирование: Построение прогнозов при различных изменениях в ценовой политике или маркетинговых бюджетах.",
            "Раннее предупреждение: Автоматическое выявление аномалий и потенциальных проблем до их проявления.",
            "Самообучение: Постоянное повышение точности моделей на основе исторических данных и фактических результатов Mini App."
        ]
    },
    {
        id: 'marketing-analytics-integration',
        category: 'МАРКЕТИНГ',
        title: 'Интеграция с Google Analytics, Яндекс Метрика, Mixpanel, Amplitude',
        description: 'Унифицированная система аналитики для Telegram Mini App с консолидацией данных в популярных платформах.',
        features: [
            "Трекинг активности в Mini App: Передача всех ключевых событий из Telegram в подключенные аналитические системы.",
            "Единая структура данных: Стандартизированная схема тегирования для согласованности аналитики между платформами.",
            "Кросс-платформенная идентификация: Объединение данных о пользователе из разных источников в единый профиль.",
            "Агрегированные дашборды: Сводная визуализация метрик из всех подключенных аналитических инструментов.",
            "Отказоустойчивость: Резервирование данных для случаев временной недоступности одной из платформ."
        ]
    },
    {
        id: 'marketing-report-export',
        category: 'МАРКЕТИНГ',
        title: 'Экспорт отчетов в PDF/Excel',
        description: 'Гибкий инструмент формирования и распространения аналитической информации о работе Telegram Mini App.',
        features: [
            "Автоматическая генерация отчетов: Формирование документов по расписанию без ручного вмешательства.",
            "Брендирование: Настройка шаблонов отчетов в соответствии с корпоративным стилем компании.",
            "Мультиформатный экспорт: Поддержка различных форматов: PDF, Excel, CSV, Google Sheets.",
            "Гранулярный доступ: Тонкая настройка прав доступа к различным видам отчетов по Mini App для разных сотрудников.",
            "Доставка через Telegram: Автоматическая отправка готовых отчетов заинтересованным лицам через бота в Telegram."
        ]
    }
];
Часть 2 из 2
TypeScript

const additionalModules = [
    // ВОВЛЕЧЕНИЕ (12 Модулей)
    {
        id: 'engagement-vip-statuses',
        category: 'ВОВЛЕЧЕНИЕ',
        title: 'Многоуровневые VIP-статусы с привилегиями',
        description: 'Продвинутая система лояльности для стимулирования активности клиентов в Telegram Mini App.',
        features: [
            "Иерархия статусов: 5-7 уровней с увеличивающимися привилегиями и эксклюзивными возможностями.",
            "Прогрессивная система: Прозрачные условия перехода между уровнями с четкими метриками (сумма покупок, активность).",
            "Персонализированные привилегии: Уникальные бонусы для каждого уровня (повышенный кешбэк, персональный менеджер).",
            "Защита от понижения: Механизм сохранения статуса при временной неактивности для лояльных клиентов.",
            "Эксклюзивные возможности: Предварительный доступ к новинкам, закрытые распродажи и специальные предложения."
        ]
    },
    {
        id: 'engagement-achievements',
        category: 'ВОВЛЕЧЕНИЕ',
        title: 'Игровые достижения с красивыми бейджами',
        description: 'Система геймификации для повышения вовлеченности пользователей Telegram Mini App.',
        features: [
            "Коллекционные бейджи: Более 50 уникальных визуальных наград с различными уровнями редкости и привлекательным дизайном.",
            "Многоступенчатые достижения: Последовательные уровни достижений с нарастающей сложностью и ценностью наград.",
            "Публичный профиль: Возможность демонстрации заработанных бейджей в профиле Telegram и шеринг в чаты.",
            "Моментальные уведомления: Мгновенные push-сообщения о разблокировке новых достижений через Telegram Bot.",
            "Социальная валидация: Система публичного признания с автоматическими поздравлениями в групповых чатах."
        ]
    },
    {
        id: 'engagement-daily-quests',
        category: 'ВОВЛЕЧЕНИЕ',
        title: 'Ежедневные задания со streak-системой',
        description: 'Механика формирования устойчивых привычек использования Telegram Mini App.',
        features: [
            "Персонализированные дейли-квесты: Адаптивные ежедневные задания, настроенные под интересы и модель поведения пользователя.",
            "Непрерывные серии (streaks): Система накопления «стриков» с растущими наградами за последовательную ежедневную активность.",
            "Визуализация прогресса: Интерактивный календарь с отметками успешных дней и текущей серией прямо в интерфейсе.",
            "Защита от пропусков: Система страховок от прерывания серии с возможностью восстановить пропущенный день.",
            "Каскадные награды: Специальные бонусы за достижение ключевых этапов (7, 14, 30, 100 дней подряд)."
        ]
    },
    {
        id: 'engagement-mlm-program',
        category: 'ВОВЛЕЧЕНИЕ',
        title: 'Партнерская MLM программа с выплатами',
        description: 'Автоматизированная многоуровневая система привлечения новых пользователей через Telegram.',
        features: [
            "Многоуровневая структура: До 5 уровней реферальной цепочки с дифференцированными вознаграждениями.",
            "Автоматизированные выплаты: Мгновенное зачисление комиссий на внутренний баланс с возможностью вывода через Telegram Payments.",
            "Прозрачная статистика: Детальная аналитика привлеченных пользователей, их активности и заработанных комиссий.",
            "Антифрод-система: Многоступенчатая защита от накруток с верификацией реальных действий привлеченных клиентов.",
            "Маркетинговые материалы: Готовые промо-материалы с возможностью простого шеринга через Telegram-каналы и чаты."
        ]
    },
    {
        id: 'engagement-referral-system',
        category: 'ВОВЛЕЧЕНИЕ',
        title: 'Реферальная система с уникальными кодами',
        description: 'Эффективный инструмент органического роста аудитории Telegram Mini App через сеть личных рекомендаций.',
        features: [
            "Персональные реферальные коды: Автоматическая генерация уникальных простых для запоминания кодов для каждого пользователя.",
            "Взаимная выгода: Двусторонние бонусы как для приглашающего, так и для нового пользователя (например, скидка обоим).",
            "Интеграция с Telegram: Готовые шаблоны для шеринга реферальных ссылок в личные чаты, группы и каналы.",
            "Многоуровневая валидация: Система подтверждения реальности привлеченных пользователей и выполнения целевых действий.",
            "Аналитика эффективности: Детальная статистика по конверсии каждой реферальной ссылки и источника трафика."
        ]
    },
    {
        id: 'engagement-points-program',
        category: 'ВОВЛЕЧЕНИЕ',
        title: 'Программы накопления баллов',
        description: 'Комплексная система вознаграждения активности в Telegram Mini App для долгосрочного взаимодействия.',
        features: [
            "Мультиактивность: Начисление баллов за разнообразные действия — покупки, отзывы, участие в опросах, шеринг контента.",
            "Гибкое использование: Разнообразные варианты применения накопленных баллов — скидки, эксклюзивный контент, виртуальные товары.",
            "Прогрессивная шкала: Увеличение скорости накопления баллов для постоянных пользователей.",
            "Ограниченный срок действия: Стратегическое планирование срока жизни баллов для стимулирования регулярного использования.",
            "Геймифицированный интерфейс: Визуализация прогресса накопления с анимацией и элементами игрового дизайна."
        ]
    },
    {
        id: 'engagement-full-gamification',
        category: 'ВОВЛЕЧЕНИЕ',
        title: 'Геймификация всех действий пользователя',
        description: 'Комплексная система игровых механик, трансформирующая пользовательский опыт в Telegram Mini App.',
        features: [
            "Универсальная система опыта (XP): Начисление за все типы взаимодействий с приложением и прогресс по уровням.",
            "Дерево развития: Нелинейная система прогрессии с возможностью выбора направлений специализации пользователя.",
            "Внутренняя экономика: Виртуальная валюта, предметы коллекционирования и система торговли между пользователями.",
            "Квесты и миссии: Разнообразные задания разной сложности с уникальными наградами и историями.",
            "Сезонные события: Регулярные специальные мероприятия с ограниченными по времени активностями и эксклюзивными наградами."
        ]
    },
    {
        id: 'engagement-social-challenges',
        category: 'ВОВЛЕЧЕНИЕ',
        title: 'Социальные челленджи и соревнования',
        description: 'Динамическая система групповых активностей для создания комьюнити внутри Telegram Mini App.',
        features: [
            "Тематические челленджи: Регулярно обновляемые групповые задания с ограниченным временем выполнения.",
            "Командные соревнования: Возможность объединения пользователей Telegram в команды с суммированием индивидуальных результатов.",
            "Live-лидерборды: Таблицы лидеров с обновлением в реальном времени и интеграцией в групповые чаты.",
            "Многоуровневые награды: Система поощрений для разных уровней участия, от участников до победителей.",
            "Социальный шеринг: Инструменты для приглашения друзей из Telegram и публикации достижений в чаты."
        ]
    },
    {
        id: 'engagement-activity-calendar',
        category: 'ВОВЛЕЧЕНИЕ',
        title: 'Календарь активности с наградами',
        description: 'Визуальная система поощрения регулярного использования Telegram Mini App.',
        features: [
            "Интерактивный календарь: Наглядное отображение активности пользователя с отметками дней взаимодействия.",
            "Прогрессивные вознаграждения: Растущая ценность наград за последовательные дни активности.",
            "Ключевые вехи: Специальные бонусы за достижение значимых дат (7, 15, 30, 100 дней).",
            "Компенсационный механизм: Возможность восстановить пропущенные дни через выполнение дополнительных заданий.",
            "Интеграция с Telegram: Автоматические напоминания через бота о необходимости поддержать серию активности."
        ]
    },
    {
        id: 'engagement-secret-achievements',
        category: 'ВОВЛЕЧЕНИЕ',
        title: 'Секретные достижения и бонусы',
        description: 'Система неожиданных поощрений для создания дополнительного исследовательского опыта в Telegram Mini App.',
        features: [
            "Скрытые достижения: Набор секретных наград, не отображаемых в общем списке до момента их обнаружения.",
            "Пасхалки и сюрпризы: Неочевидные интерактивные элементы, спрятанные в интерфейсе Mini App.",
            "Случайные награды: Система неожиданных бонусов за стандартные действия с вариативным вознаграждением.",
            "Комбо-действия: Особые награды за определенные последовательности действий или нестандартные сценарии использования.",
            "Социальный элемент: Возможность делиться информацией об обнаруженных секретах с другими пользователями Telegram."
        ]
    },
    {
        id: 'engagement-leaderboards',
        category: 'ВОВЛЕЧЕНИЕ',
        title: 'Система лидербордов',
        description: 'Многофункциональная соревновательная механика для Telegram Mini App.',
        features: [
            "Мультикатегорийные рейтинги: Различные таблицы лидеров по разным метрикам (активность, покупки, социальная вовлеченность).",
            "Динамическое обновление: Рейтинги с обновлением в реальном времени с уведомлениями об изменении позиции.",
            "Временные периоды: Еженедельные, ежемесячные и сезонные таблицы с обнулением для равных возможностей.",
            "Сегментация по группам: Отдельные лидерборды для разных сегментов (новички, регионы, возраст).",
            "Эксклюзивные награды: Уникальные привилегии и статусы для пользователей из топ-позиций рейтингов."
        ]
    },
    {
        id: 'engagement-wheel-of-fortune',
        category: 'ВОВЛЕЧЕНИЕ',
        title: 'Колесо фортуны с призами',
        description: 'Интерактивный механизм геймификации с элементом случайности для Telegram Mini App.',
        features: [
            "Визуально привлекательная анимация: Высококачественная графика вращения колеса с звуковыми эффектами.",
            "Многоуровневая система призов: Разнообразные награды разной ценности от виртуальных бонусов до реальных товаров.",
            "Ежедневные бесплатные вращения: Система регулярных бонусных попыток для стимулирования ежедневных посещений.",
            "Буст-механики: Возможности увеличения шансов на ценные призы через выполнение определенных действий.",
            "Интеграция с Telegram: Мгновенное уведомление о выигрышах через бота и возможность поделиться результатами."
        ]
    },
    // ОБРАЗОВАНИЕ (12 Модулей)
    {
        id: 'education-course-platform',
        category: 'ОБРАЗОВАНИЕ',
        title: 'Платформа курсов с видео и интерактивными тестами',
        description: 'Комплексное решение для онлайн-обучения внутри экосистемы Telegram.',
        features: [
            "Адаптивный видеоплеер: Оптимизированное воспроизведение с авторегулировкой качества.",
            "Интерактивные таймкоды: Навигация по ключевым моментам видеоконтента с быстрым переходом.",
            "Многоязычные субтитры: Автоматическая генерация и переключение между языками.",
            "Встроенные интерактивы: Тесты, опросы и задания, интегрированные непосредственно в видео.",
            "Синхронизация прогресса: Сохранение позиции просмотра между разными сеансами и устройствами."
        ]
    },
    {
        id: 'education-knowledge-base',
        category: 'ОБРАЗОВАНИЕ',
        title: 'База знаний с умным поиском и FAQ',
        description: 'Интеллектуальная система организации информации для пользователей Telegram Mini App.',
        features: [
            "Семантический поиск: Понимание смысла запроса, а не только ключевых слов, для точных результатов.",
            "Контекстные рекомендации: Предложение релевантных материалов на основе истории взаимодействия.",
            "Динамические FAQ: Автоматическое формирование списка популярных вопросов на основе запросов.",
            "Визуализация связей: Интерактивная карта знаний для понимания взаимосвязей между разделами.",
            "Интеграция с Telegram ботом: Возможность задать вопрос и получить ответ из базы знаний в чате."
        ]
    },
    {
        id: 'education-quizzes',
        category: 'ОБРАЗОВАНИЕ',
        title: 'Квизы и тесты с таймером и очками',
        description: 'Интерактивная система проверки знаний с элементами геймификации для Telegram Mini App.',
        features: [
            "Разнообразие форматов: Множество типов вопросов — от множественного выбора до открытых ответов с AI-проверкой.",
            "Динамический таймер: Настраиваемое ограничение времени с визуализацией для вовлекающего опыта.",
            "Адаптивная сложность: Автоматическая регулировка уровня сложности в зависимости от результатов.",
            "Система достижений: Баллы, бейджи и уровни мастерства с возможностью поделиться результатами в Telegram.",
            "Соревновательные элементы: Возможность вызова друзей из контактов Telegram на соревнования в реальном времени."
        ]
    },
    {
        id: 'education-webinars',
        category: 'ОБРАЗОВАНИЕ',
        title: 'Система вебинаров и прямых эфиров',
        description: 'Профессиональное решение для организации онлайн-обучения и трансляций в реальном времени через Telegram.',
        features: [
            "HD-трансляция: Высококачественный стриминг с адаптивным битрейтом для мобильного просмотра.",
            "Интерактивные инструменты: Встроенные опросы, вопросы, реакции и чат для взаимодействия со зрителями.",
            "Демонстрация экрана: Возможность показа презентаций и других материалов с поддержкой аннотаций.",
            "Автоматическая запись: Сохранение трансляций с разбивкой на главы для последующего просмотра.",
            "Интеграция с Telegram-каналами: Автоматические оповещения о предстоящих трансляциях."
        ]
    },
    {
        id: 'education-marathons',
        category: 'ОБРАЗОВАНИЕ',
        title: 'Марафоны с ежедневными заданиями',
        description: 'Структурированная система интенсивного обучения с высоким уровнем вовлеченности в Telegram.',
        features: [
            "Последовательная структура: Логически выстроенные ежедневные блоки с контентом и заданиями.",
            "Автоматические проверки: Моментальная обратная связь по выполненным заданиям с рекомендациями.",
            "Групповая динамика: Создание выделенных групповых чатов в Telegram для участников с модерацией.",
            "Визуализация прогресса: Наглядное отображение продвижения к цели с поощрением за прохождение этапов.",
            "Система напоминаний: Интеллектуальные уведомления через Telegram Bot для поддержания регулярности."
        ]
    },
    {
        id: 'education-certificates',
        category: 'ОБРАЗОВАНИЕ',
        title: 'Автоматическая выдача сертификатов',
        description: 'Система валидации и документирования полученных навыков в Telegram Mini App.',
        features: [
            "Персонализированные сертификаты: Автоматическая генерация дизайнерских документов с данными пользователя.",
            "Блокчейн-верификация: Запись данных о выданных сертификатах в распределенный реестр для гарантии подлинности.",
            "QR-код подтверждения: Встроенный код для мгновенной проверки легитимности сертификата.",
            "Интеграция с профилем: Возможность автоматического добавления сертификатов в профиль пользователя.",
            "Социальный шеринг: Инструменты для публикации полученных сертификатов в каналы и группы Telegram."
        ]
    },
    {
        id: 'education-homework-autocheck',
        category: 'ОБРАЗОВАНИЕ',
        title: 'Домашние задания с автопроверкой',
        description: 'Интеллектуальная система для закрепления полученных знаний в Telegram Mini App.',
        features: [
            "Мгновенная проверка: Автоматическая валидация ответов с детальной обратной связью через Telegram Bot.",
            "Адаптивная сложность: Динамическое изменение уровня сложности заданий на основе предыдущих результатов.",
            "Разнообразие форматов: Поддержка текстовых, числовых, тестовых, графических и кодовых заданий.",
            "Пошаговые подсказки: Интеллектуальная система хинтов с постепенным раскрытием решения.",
            "Аналитика ошибок: Выявление типичных проблем и пробелов в знаниях с рекомендациями по обучению."
        ]
    },
    {
        id: 'education-personal-plans',
        category: 'ОБРАЗОВАНИЕ',
        title: 'Персональные учебные планы и трекинг прогресса',
        description: 'Адаптивная система индивидуализации образовательного процесса в Telegram Mini App.',
        features: [
            "Диагностическое тестирование: Начальная оценка знаний для формирования оптимального учебного плана.",
            "Адаптивные траектории: Автоматическая корректировка образовательного пути на основе результатов.",
            "Многомерный трекинг: Детальный мониторинг прогресса по различным компетенциям и навыкам.",
            "Интеллектуальные рекомендации: Система предложений дополнительных материалов для восполнения пробелов.",
            "Интеграция с календарем: Синхронизация с календарем Telegram для планирования занятий."
        ]
    },
    {
        id: 'education-simulations',
        category: 'ОБРАЗОВАНИЕ',
        title: 'Интерактивные уроки с симуляциями',
        description: 'Высокотехнологичные образовательные инструменты для практического обучения в Telegram.',
        features: [
            "Реалистичные симуляции: Интерактивные модели реальных процессов и систем для безопасной практики.",
            "Сценарное обучение: Ветвящиеся сценарии с различными исходами в зависимости от решений пользователя.",
            "3D-визуализация: Трехмерные модели с возможностью изучения строения и взаимодействия компонентов.",
            "Геймифицированные упражнения: Практические задания в игровом формате с прогрессией сложности.",
            "Моментальная обратная связь: Немедленный анализ действий пользователя с рекомендациями по улучшению."
        ]
    },
    {
        id: 'education-mentorship',
        category: 'ОБРАЗОВАНИЕ',
        title: 'Система менторства и наставничества',
        description: 'Платформа для эффективного взаимодействия учеников с экспертами через Telegram.',
        features: [
            "Интеллектуальный мэтчинг: Алгоритмический подбор наставников на основе целей, интересов и стиля обучения.",
            "Структурированное взаимодействие: Готовые шаблоны программ наставничества с четкими этапами.",
            "Защищенные коммуникации: Встроенная система видеовстреч и чатов внутри экосистемы Telegram.",
            "Трекинг целей: Совместная постановка и отслеживание прогресса по достижению образовательных целей.",
            "Система обратной связи: Регулярная двусторонняя оценка эффективности наставничества."
        ]
    },
    {
        id: 'education-group-projects',
        category: 'ОБРАЗОВАНИЕ',
        title: 'Групповые проекты и командная работа',
        description: 'Экосистема для эффективной совместной работы над образовательными проектами в Telegram.',
        features: [
            "Формирование команд: Автоматический подбор участников с комплементарными навыками и ролями.",
            "Управление задачами: Встроенная система распределения и отслеживания выполнения задач с интеграцией в Telegram.",
            "Совместное редактирование: Инструменты для одновременной работы над документами и презентациями.",
            "Групповые коммуникации: Автоматически создаваемые тематические чаты в Telegram для обсуждения проекта.",
            "Peer-review система: Механизм взаимной оценки работы участников команды для справедливой оценки."
        ]
    },
    {
        id: 'education-library',
        category: 'ОБРАЗОВАНИЕ',
        title: 'Библиотека учебных материалов',
        description: 'Структурированное хранилище образовательного контента с продвинутыми функциями поиска в Telegram Mini App.',
        features: [
            "Мультиформатный контент: Поддержка разнообразных типов материалов — текст, PDF, аудио, видео, упражнения.",
            "Интеллектуальная категоризация: Автоматическое структурирование материалов по темам, уровню сложности и формату.",
            "Персональная подборка: Рекомендательная система на основе интересов и истории обучения пользователя.",
            "Оффлайн-доступ: Возможность сохранения материалов для изучения без подключения к интернету.",
            "Социальные коллекции: Возможность создания и шеринга тематических подборок материалов с другими пользователями."
        ]
    },
     // B2B И КОРПОРАТИВНЫЕ СЕРВИСЫ (5 Модулей)
    {
        id: 'b2b-corporate-structure',
        category: 'B2B И КОРПОРАТИВНЫЕ СЕРВИСЫ',
        title: 'Структура компании и контакты',
        description: 'Интерактивная схема организационной структуры с поиском сотрудников, их должностей и контактов прямо в Mini App.',
        features: [
            "Интерактивная визуальная схема организационной структуры с возможностью масштабирования.",
            "Быстрый поиск по сотрудникам, отделам и должностям.",
            "Просмотр карточки сотрудника с фото, должностью и контактными данными.",
            "Доступ к рабочим контактам в один клик прямо в Telegram (позвонить, написать)."
        ]
    },
    {
        id: 'b2b-knowledge-base',
        category: 'B2B И КОРПОРАТИВНЫЕ СЕРВИСЫ',
        title: 'База знаний компании',
        description: 'Централизованное хранилище регламентов, инструкций и шаблонов документов с умным семантическим поиском.',
        features: [
            "Умный семантический поиск по всем корпоративным документам, понимающий смысл запроса.",
            "Централизованное и версионируемое хранилище регламентов, инструкций и политик.",
            "Шаблоны и инструкции всегда под рукой у каждого сотрудника с разграничением прав доступа.",
            "Интеграция с корпоративным ботом для быстрого поиска информации."
        ]
    },
    {
        id: 'b2b-document-request',
        category: 'B2B И КОРПОРАТИВНЫЕ СЕРВИСЫ',
        title: 'Заказ справок и документов',
        description: 'Автоматизированная подача заявок в бухгалтерию или HR-отдел (справка 2-НДФЛ, справка с места работы) с отслеживанием статуса через Telegram-бота.',
        features: [
            "Автоматизация подачи заявок в HR, бухгалтерию и другие отделы через удобную форму.",
            "Отслеживание статуса исполнения заявки в реальном времени (Принято, В работе, Готово).",
            "Автоматические уведомления о готовности документов через Telegram-бота.",
            "История заявок и возможность скачать готовые документы прямо из приложения."
        ]
    },
    {
        id: 'b2b-corporate-calendar',
        category: 'B2B И КОРПОРАТИВНЫЕ СЕРВИСЫ',
        title: 'Календарь корпоративных событий',
        description: 'Общий календарь с возможностью подписки на уведомления о днях рождения коллег, корпоративах и важных встречах.',
        features: [
            "Общий календарь событий компании с разными уровнями доступа (для всех, для отдела).",
            "Автоматические уведомления о днях рождения коллег, корпоративах и важных встречах.",
            "Персональная подписка на релевантные категории событий.",
            "Интеграция с личным календарем пользователя (Google Calendar, Apple Calendar)."
        ]
    },
    {
        id: 'b2b-employee-onboarding',
        category: 'B2B И КОРПОРАТИВНЫЕ СЕРВИСЫ',
        title: 'Онбординг новых сотрудников',
        description: 'Автоматизированные приветственные цепочки и чек-листы задач для быстрой и эффективной адаптации новичков в компании.',
        features: [
            "Автоматизированные и адаптивные welcome-цепочки для новичков с подачей информации в нужный момент.",
            "Персональные чек-листы задач для новичка на испытательный срок с контролем выполнения.",
            "Назначение бадди (наставника) и организация встреч.",
            "Аналитика и контроль процесса адаптации для HR-менеджера."
        ]
    },
    // СЕРВИСЫ И БРОНИРОВАНИЕ (8 Модулей)
    {
        id: 'booking-realtime-calendar',
        category: 'СЕРВИСЫ И БРОНИРОВАНИЕ',
        title: 'Онлайн-запись с календарем в реальном времени',
        description: 'Умный календарь с интеграцией, автоматическими напоминаниями и защитой от двойных записей.',
        features: [
            "Синхронизация с Google Calendar и другими календарями в реальном времени.",
            "Автоматическая блокировка слотов при бронировании.",
            "SMS/Email/Telegram напоминания клиентам о предстоящей записи.",
            "Гибкая настройка рабочего графика специалистов и ресурсов."
        ]
    },
    {
        id: 'booking-queue-management',
        category: 'СЕРВИСЫ И БРОНИРОВАНИЕ',
        title: 'Система управления очередями',
        description: 'Электронная очередь с QR-кодами, SMS-уведомлениями и статистикой времени ожидания.',
        features: [
            "Регистрация в очереди через QR-код или терминал.",
            "Уведомления о подходе очереди через SMS или Telegram.",
            "Возможность переноса времени или отмены записи.",
            "Аналитика по времени ожидания и обслуживания."
        ]
    },
    {
        id: 'booking-resource-management',
        category: 'СЕРВИСЫ И БРОНИРОВАНИЕ',
        title: 'Бронирование ресурсов (столики, номера, авто)',
        description: 'Система с картой зала/объектов, выбором мест и автоматической блокировкой на время оплаты.',
        features: [
            "Интерактивная карта с доступными ресурсами (столики, номера).",
            "Выбор конкретного места или ресурса.",
            "Автоматическая блокировка на время оплаты для избежания двойного бронирования.",
            "Календарь доступности и сезонные цены."
        ]
    },
    {
        id: 'booking-crm-integration',
        category: 'СЕРВИСЫ И БРОНИРОВАНИЕ',
        title: 'CRM для клиентов с историей взаимодействий',
        description: 'Полная карточка клиента: история покупок, предпочтения, заметки менеджера, автоматические сегменты.',
        features: [
            "Ведение полной истории визитов и покупок клиента.",
            "Заметки и предпочтения для персонализированного сервиса.",
            "Автоматическая сегментация клиентов (новые, постоянные, VIP).",
            "Напоминания о дне рождения и другие триггеры."
        ]
    },
    {
        id: 'booking-prepayment',
        category: 'СЕРВИСЫ И БРОНИРОВАНИЕ',
        title: 'Предоплата и депозиты при бронировании',
        description: 'Система частичной оплаты для гарантии явки с автоматическими возвратами и штрафами.',
        features: [
            "Настройка обязательной частичной предоплаты для услуг.",
            "Автоматический возврат депозита при отмене в установленный срок.",
            "Гибкая настройка штрафов за неявку или позднюю отмену.",
            "Безопасное хранение данных платежных карт."
        ]
    },
    {
        id: 'booking-specialist-reviews',
        category: 'СЕРВИСЫ И БРОНИРОВАНИЕ',
        title: 'Отзывы о специалистах с рейтингами',
        description: 'Система верифицированных отзывов с фото работ и портфолио мастеров для повышения доверия.',
        features: [
            "Сбор отзывов только от реальных клиентов после оказания услуги.",
            "Формирование рейтинга специалистов на основе оценок.",
            "Портфолио с фотографиями работ для каждого мастера.",
            "Возможность ответа на отзывы от имени компании."
        ]
    },
    {
        id: 'booking-cost-calculator',
        category: 'СЕРВИСЫ И БРОНИРОВАНИЕ',
        title: 'Калькулятор стоимости услуг с опциями',
        description: 'Динамическое ценообразование, пакетные предложения и учет сезонных цен.',
        features: [
            "Интерактивный калькулятор для расчета стоимости сложных услуг.",
            "Возможность выбора дополнительных опций и их влияния на цену.",
            "Создание пакетных предложений со скидкой.",
            "Автоматический учет сезонных и временных коэффициентов."
        ]
    },
    {
        id: 'booking-video-consultations',
        category: 'СЕРВИСЫ И БРОНИРОВАНИЕ',
        title: 'Видеоконсультации и удаленные услуги',
        description: 'Встроенный видеозвонок с демонстрацией экрана и записью консультаций для удаленного сервиса.',
        features: [
            "Безопасные видеозвонки прямо из Mini App.",
            "Функция демонстрации экрана для наглядности.",
            "Возможность записи консультации для последующего просмотра.",
            "Интеграция с календарем для планирования удаленных сессий."
        ]
    },
    // ФИНТЕХ И ПЛАТЕЖИ (8 Модулей)
    {
        id: 'fintech-telegram-stars',
        category: 'ФИНТЕХ И ПЛАТЕЖИ',
        title: 'Прием Telegram Stars',
        description: 'Мгновенные переводы без комиссий для оплаты цифровых товаров и услуг, с автоматической конвертацией.',
        features: [
            "Прием оплаты за цифровые товары и услуги через Telegram Stars.",
            "Нулевая комиссия на входящие транзакции.",
            "Автоматическая конвертация Stars в фиатную валюту при выводе.",
            "Прозрачная история всех операций со звездами."
        ]
    },
    {
        id: 'fintech-multi-currency-wallet',
        category: 'ФИНТЕХ И ПЛАТЕЖИ',
        title: 'Мультивалютный кошелек с конвертацией',
        description: 'Поддержка 20+ валют с выгодными курсами, историей операций и настройкой лимитов.',
        features: [
            "Хранение средств в более чем 20 фиатных и криптовалютах.",
            "Мгновенная конвертация по выгодному курсу.",
            "Детальная история операций и балансов.",
            "Настройка лимитов на операции и хранение."
        ]
    },
    {
        id: 'fintech-p2p-transfers',
        category: 'ФИНТЕХ И ПЛАТЕЖИ',
        title: 'Внутренние P2P переводы между пользователями',
        description: 'Переводы по номеру телефона, запросы на оплату и функция разделения счета.',
        features: [
            "Мгновенные переводы между пользователями по номеру телефона или ID.",
            "Возможность запросить средства у другого пользователя.",
            "Функция 'Разделить счет' для совместных оплат.",
            "Защита транзакций и история переводов."
        ]
    },
    {
        id: 'fintech-crypto-payments',
        category: 'ФИНТЕХ И ПЛАТЕЖИ',
        title: 'Криптовалютные платежи (Bitcoin, USDT, TON)',
        description: 'Прием платежей в криптовалюте с автоматической конвертацией, холодными кошельками и минимальными комиссиями.',
        features: [
            "Поддержка популярных криптовалют: BTC, ETH, USDT, TON.",
            "Автоматическая конвертация в фиат для защиты от волатильности.",
            "Высокий уровень безопасности с использованием холодных кошельков.",
            "Минимальные комиссии по сравнению с традиционным эквайрингом."
        ]
    },
    {
        id: 'fintech-installments',
        category: 'ФИНТЕХ И ПЛАТЕЖИ',
        title: 'Рассрочка и кредитование через партнеров',
        description: 'Интеграция с банками-партнерами для одобрения рассрочки или кредита за 2 минуты.',
        features: [
            "Интеграция с сервисами рассрочек (Тинькофф, Сбер и др.).",
            "Быстрое одобрение заявки в режиме онлайн.",
            "Гибкие условия по срокам и первоначальному взносу.",
            "Повышение среднего чека и конверсии."
        ]
    },
    {
        id: 'fintech-subscriptions',
        category: 'ФИНТЕХ И ПЛАТЕЖИ',
        title: 'Система подписок и рекуррентных платежей',
        description: 'Автопродление, пробные периоды и удобное управление подписками для пользователя.',
        features: [
            "Автоматическое списание средств за периодические услуги.",
            "Настройка пробных периодов и разных тарифных планов.",
            "Личный кабинет для управления подпиской (отмена, смена тарифа).",
            "Уведомления о предстоящем списании."
        ]
    },
    {
        id: 'fintech-invoicing',
        category: 'ФИНТЕХ И ПЛАТЕЖИ',
        title: 'Выставление счетов и актов для юрлиц',
        description: 'Автоматическая генерация документов, ЭДО и интеграция с бухгалтерскими системами.',
        features: [
            "Автоматическое создание счетов на оплату и актов выполненных работ.",
            "Отправка документов клиенту по email или через ЭДО.",
            "Интеграция с 1С и другими бухгалтерскими программами.",
            "Отслеживание статуса оплаты счетов."
        ]
    },
    {
        id: 'fintech-offline-qr',
        category: 'ФИНТЕХ И ПЛАТЕЖИ',
        title: 'Эквайринг для офлайн-точек через QR',
        description: 'Прием платежей в офлайн-точках без терминала с моментальным зачислением средств.',
        features: [
            "Генерация статических и динамических QR-кодов для оплаты.",
            "Прием платежей через СБП без дополнительного оборудования.",
            "Моментальное зачисление средств на счет.",
            "Низкие комиссии по сравнению с классическим эквайрингом."
        ]
    },
    // КОНТЕНТ И МЕДИА (8 Модулей)
    {
        id: 'media-news-feed',
        category: 'КОНТЕНТ И МЕДИА',
        title: 'Лента новостей с алгоритмической подачей',
        description: 'Умная лента на основе интересов, с приоритетами и возможностью скрыть неинтересный контент.',
        features: [
            "Алгоритмическое ранжирование постов на основе интересов пользователя.",
            "Поддержка разных форматов: текст, фото, видео, статьи.",
            "Настройка приоритетных источников и тем.",
            "Возможность скрыть неинтересный контент и авторов."
        ]
    },
    {
        id: 'media-blog-platform',
        category: 'КОНТЕНТ И МЕДИА',
        title: 'Встроенный блог с редактором и SEO',
        description: 'WYSIWYG редактор, настройка метатегов, генерация sitemap и AMP-версий для лучшей индексации.',
        features: [
            "Удобный WYSIWYG-редактор для создания статей.",
            "Настройка SEO-параметров: title, description, keywords.",
            "Автоматическая генерация sitemap.xml для поисковых систем.",
            "Поддержка AMP (Accelerated Mobile Pages) для быстрой загрузки."
        ]
    },
    {
        id: 'media-gallery',
        category: 'КОНТЕНТ И МЕДИА',
        title: 'Галерея фото/видео с категориями',
        description: 'Автоматическая обработка изображений, наложение водяных знаков и защита от скачивания.',
        features: [
            "Создание альбомов и категорий для фото и видео.",
            "Автоматическое сжатие и оптимизация изображений без потери качества.",
            "Возможность наложения водяных знаков для защиты контента.",
            "Гибкие настройки приватности и доступа."
        ]
    },
    {
        id: 'media-podcasts',
        category: 'КОНТЕНТ И МЕДИА',
        title: 'Подкасты и аудиоконтент с плейлистами',
        description: 'Фоновое воспроизведение, создание закладок и настройка скорости воспроизведения для удобного прослушивания.',
        features: [
            "Загрузка и хостинг аудиофайлов.",
            "Поддержка фонового воспроизведения в Mini App.",
            "Возможность создавать плейлисты и закладки.",
            "Настройка скорости воспроизведения (1x, 1.5x, 2x)."
        ]
    },
    {
        id: 'media-live-streams',
        category: 'КОНТЕНТ И МЕДИА',
        title: 'Прямые трансляции и stories',
        description: 'Эфемерный контент с реакциями, опросами, стикерами и музыкой для максимального вовлечения.',
        features: [
            "Проведение прямых видеотрансляций внутри Mini App.",
            "Создание коротких 'stories', исчезающих через 24 часа.",
            "Интерактивные элементы: реакции, опросы, стикеры.",
            "Возможность сохранения эфиров для последующего просмотра."
        ]
    },
    {
        id: 'media-comments-system',
        category: 'КОНТЕНТ И МЕДИА',
        title: 'Система комментариев с AI-модерацией',
        description: 'Древовидные комментарии, реакции, автомодерация спама и жалобы для создания здорового комьюнити.',
        features: [
            "Древовидная структура комментариев с ответами.",
            "Система реакций на комментарии.",
            "Автоматическая модерация спама и токсичных сообщений с помощью AI.",
            "Система жалоб для пользователей."
        ]
    },
    {
        id: 'media-ai-content-generation',
        category: 'КОНТЕНТ И МЕДИА',
        title: 'Генерация контента через AI (тексты, изображения)',
        description: 'Интеграция с GPT для текстов и DALL-E/Stable Diffusion для изображений, с функцией автопостинга.',
        features: [
            "Генерация текстов для постов и статей на основе GPT.",
            "Создание уникальных изображений по текстовому описанию.",
            "Инструменты для рерайтинга и улучшения существующего контента.",
            "Функция автопостинга сгенерированного контента."
        ]
    },
    {
        id: 'media-content-planner',
        category: 'КОНТЕНТ И МЕДИА',
        title: 'Планировщик публикаций и контент-календарь',
        description: 'Отложенный постинг, рекомендации по оптимальному времени и удобный календарный вид.',
        features: [
            "Создание и планирование публикаций на недели вперед.",
            "Визуальный контент-календарь.",
            "Рекомендации по лучшему времени для постинга на основе аналитики.",
            "Автоматическая публикация в назначенное время."
        ]
    },
    // ИНТЕГРАЦИИ И API (9 Модулей)
    {
        id: 'integrations-crm',
        category: 'ИНТЕГРАЦИИ И API',
        title: 'Интеграция с CRM (amoCRM, Bitrix24)',
        description: 'Двусторонняя синхронизация лидов, контактов, сделок и задач между Mini App и вашей CRM.',
        features: [
            "Автоматическое создание лидов в CRM при регистрации в Mini App.",
            "Двусторонняя синхронизация статусов сделок.",
            "Передача истории взаимодействий с клиентом.",
            "Поддержка кастомных полей и воронок."
        ]
    },
    {
        id: 'integrations-external-services',
        category: 'ИНТЕГРАЦИИ И API',
        title: 'Синхронизация с внешними сервисами',
        description: 'Автоматическая синхронизация данных со складскими и бухгалтерскими системами через API.',
        features: [
            "Обмен данными с 1С, МойСклад и другими учетными системами.",
            "Синхронизация товарных остатков и цен в реальном времени.",
            "Автоматическая выгрузка заказов и данных о клиентах.",
            "Гибкая настройка полей для сопоставления данных."
        ]
    },
    {
        id: 'integrations-webhooks',
        category: 'ИНТЕГРАЦИИ И API',
        title: 'Веб-хуки для уведомлений',
        description: 'Мгновенные уведомления ваших систем или партнеров о событиях: новые заказы, изменения статусов, платежи.',
        features: [
            "Настройка веб-хуков на различные события в приложении.",
            "Отправка данных в реальном времени в любую внешнюю систему.",
            "Поддержка кастомных заголовков и форматов данных (JSON).",
            "Логирование запросов и ответов для отладки."
        ]
    },
    {
        id: 'integrations-data-export',
        category: 'ИНТЕГРАЦИИ И API',
        title: 'Экспорт данных в популярные форматы',
        description: 'Выгрузка данных (пользователи, заказы, товары) в Excel, CSV, JSON, PDF с настраиваемыми шаблонами.',
        features: [
            "Экспорт данных по расписанию или по запросу.",
            "Поддержка форматов Excel, CSV, JSON, PDF.",
            "Создание настраиваемых шаблонов для выгрузки.",
            "Автоматическая отправка отчетов на email или в облако."
        ]
    },
    {
        id: 'integrations-custom-api',
        category: 'ИНТЕГРАЦИИ И API',
        title: 'Кастомный API для разработчиков',
        description: 'Предоставление защищенного REST API для интеграции с вашими собственными системами и сервисами.',
        features: [
            "Документированный REST API для доступа к данным приложения.",
            "Безопасная аутентификация по API-ключам.",
            "Управление правами доступа для разных ключей.",
            "Песочница (sandbox) для тестирования интеграций."
        ]
    },
    {
        id: 'integrations-google-sheets',
        category: 'ИНТЕГРАЦИИ И API',
        title: 'Интеграция с Google Sheets',
        description: 'Автоматическая выгрузка и обновление данных о заказах, пользователях и лидах в Google Таблицах.',
        features: [
            "Двусторонняя синхронизация данных с Google Sheets.",
            "Автоматическое добавление новых заказов в таблицу.",
            "Обновление статусов и данных в реальном времени.",
            "Использование Google Sheets как простого источника данных."
        ]
    },
    {
        id: 'integrations-telephony',
        category: 'ИНТЕГРАЦИИ И API',
        title: 'Интеграция с IP-телефонией',
        description: 'Всплывающая карточка клиента при входящем звонке и автоматическое создание событий в CRM.',
        features: [
            "Интеграция с популярными сервисами IP-телефонии.",
            "Отображение карточки клиента из Mini App при звонке.",
            "Автоматическое создание событий (звонок) в истории клиента.",
            "Звонок клиенту в один клик прямо из интерфейса."
        ]
    },
    {
        id: 'integrations-maps',
        category: 'ИНТЕГРАЦИИ И API',
        title: 'Интеграция с картами (Яндекс, Google)',
        description: 'Отображение объектов на карте, построение маршрутов и расчет расстояний.',
        features: [
            "Отображение ваших офисов, магазинов или ПВЗ на карте.",
            "Поиск ближайшего объекта к пользователю.",
            "Построение маршрута до точки.",
            "Использование карт для выбора зоны доставки."
        ]
    },
    {
        id: 'integrations-social-auth',
        category: 'ИНТЕГРАЦИИ И API',
        title: 'Авторизация через социальные сети',
        description: 'Вход в приложение в один клик через Google, VK, Яндекс и другие популярные сервисы.',
        features: [
            "Быстрая регистрация и вход без пароля.",
            "Поддержка Google, VK, Яндекс и других провайдеров.",
            "Автоматическое получение базовых данных пользователя (имя, аватар).",
            "Повышение конверсии в регистрацию."
        ]
    }
];

const allModulesFinal = [...allModules, ...additionalModules];

// Функция для получения иконки модуля
function getModuleIcon(moduleTitle: string, category: string): JSX.Element {
    const lowerTitle = moduleTitle.toLowerCase();

    if (lowerTitle.includes('витрина') || lowerTitle.includes('каталог')) return <ShoppingCart className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('карточка товара')) return <Camera className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('корзина')) return <Package className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('платеж') || lowerTitle.includes('оплат')) return <CreditCard className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('статус') || lowerTitle.includes('трекинг')) return <ClipboardCheck className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('доставк')) return <Warehouse className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('ar') || lowerTitle.includes('примерка')) return <Aperture className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('промокод') || lowerTitle.includes('скидк')) return <Ticket className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('рекомендаци') || lowerTitle.includes('кросс-продажи')) return <Eye className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('повтор заказа')) return <Repeat className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('групповые покупки')) return <Users2 className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('предзаказ')) return <History className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('wishlist')) return <Heart className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('сравнение')) return <Baseline className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('интеграция') && category === 'E-COMMERCE') return <Link className="w-8 h-8 text-telegram" />;

    if (lowerTitle.includes('персонализаци')) return <UserCheck className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('аналитик') || lowerTitle.includes('дашборд')) return <BarChart3 className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('push') || lowerTitle.includes('гео')) return <Bell className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('a/b')) return <TestTube2 className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('воронки')) return <Filter className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('ретаргетинг')) return <Target className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('email') || lowerTitle.includes('sms')) return <Mail className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('отзыв') || lowerTitle.includes('доказательства')) return <MessageSquare className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('тепловые карты')) return <MousePointerClick className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('сегментаци')) return <Users2 className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('utm')) return <Link className="w-8 h-8 text-telegram" />;

    if (lowerTitle.includes('vip')) return <Shield className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('достижения') || lowerTitle.includes('бейджи')) return <Trophy className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('задания')) return <ClipboardCheck className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('партнерская') || lowerTitle.includes('mlm')) return <Group className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('реферальная')) return <Gift className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('баллов')) return <Star className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('геймификация')) return <Puzzle className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('челленджи')) return <Milestone className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('календарь активности')) return <Calendar className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('лидерборд')) return <BarChart3 className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('колесо фортуны')) return <Aperture className="w-8 h-8 text-telegram" />;

    if (lowerTitle.includes('курс') || lowerTitle.includes('платформа')) return <BookOpen className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('база знаний')) return <Database className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('квизы') || lowerTitle.includes('тесты')) return <FileText className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('вебинар') || lowerTitle.includes('эфир')) return <Presentation className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('марафон')) return <Milestone className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('сертификат')) return <GraduationCap className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('домашние задания')) return <PenTool className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('учебные планы')) return <ClipboardCheck className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('симуляции')) return <Bot className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('ментор')) return <UserCheck className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('проекты')) return <Group className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('библиотека')) return <Library className="w-8 h-8 text-telegram" />;

    if (lowerTitle.includes('структура компании')) return <Building2 className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('заказ справок')) return <FileText className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('календарь корпоративных')) return <Calendar className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('онбординг')) return <UserCheck className="w-8 h-8 text-telegram" />;

    if (lowerTitle.includes('запись') || lowerTitle.includes('бронирование')) return <Calendar className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('очеред')) return <Users2 className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('crm')) return <Briefcase className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('видеоконсультации')) return <Video className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('калькулятор')) return <Baseline className="w-8 h-8 text-telegram" />;

    if (lowerTitle.includes('кошелек')) return <Wallet className="w-8 h-8 text-telegram" />; // Предполагаем Wallet существует
    if (lowerTitle.includes('p2p')) return <ArrowRight className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('криптовалют')) return <HandCoins className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('рассрочк')) return <CreditCard className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('подписк')) return <Repeat className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('счетов')) return <FileText className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('эквайринг')) return <QrCode className="w-8 h-8 text-telegram" />;

    if (lowerTitle.includes('лента новостей')) return <FileText className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('блог')) return <PenTool className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('галерея')) return <Camera className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('подкаст')) return <Headphones className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('трансляции')) return <Tv className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('комментар')) return <MessageSquare className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('генерация контента')) return <Bot className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('планировщик')) return <Calendar className="w-8 h-8 text-telegram" />;

    if (lowerTitle.includes('api') || lowerTitle.includes('интеграции')) return <Code2 className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('веб-хуки')) return <Webhook className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('экспорт')) return <FileOutput className="w-8 h-8 text-telegram" />;
    if (lowerTitle.includes('авторизация')) return <Lock className="w-8 h-8 text-telegram" />;

    return getCategoryIcon(category);
}

function getCategoryIcon(category: string): JSX.Element {
  const categoryIcons: Record<string, JSX.Element> = {
    "E-COMMERCE": <ShoppingCart className="w-8 h-8 text-telegram" />,
    "МАРКЕТИНГ": <BarChart3 className="w-8 h-8 text-telegram" />,
    "ВОВЛЕЧЕНИЕ": <Gift className="w-8 h-8 text-telegram" />,
    "ОБРАЗОВАНИЕ": <GraduationCap className="w-8 h-8 text-telegram" />,
    "B2B И КОРПОРАТИВНЫЕ СЕРВИСЫ": <Briefcase className="w-8 h-8 text-telegram" />,
    "СЕРВИСЫ И БРОНИРОВАНИЕ": <Calendar className="w-8 h-8 text-telegram" />,
    "ФИНТЕХ И ПЛАТЕЖИ": <DollarSign className="w-8 h-8 text-telegram" />,
    "КОНТЕНТ И МЕДИА": <FileText className="w-8 h-8 text-telegram" />,
    "ИНТЕГРАЦИИ И API": <Settings className="w-8 h-8 text-telegram" />,
  };
  return categoryIcons[category] || <Zap className="w-8 h-8 text-telegram" />;
}

const uniqueCategories = [...new Set(allModulesFinal.map(m => m.category))];

export default function Modules() {
  const [selectedCategory, setSelectedCategory] = useState<string>("all");
  const [searchTerm, setSearchTerm] = useState<string>("");
  const [selectedModule, setSelectedModule] = useState<any>(null);
  const [isModalOpen, setIsModalOpen] = useState(false);

  const filteredModules = allModulesFinal.filter(module => {
    const matchesCategory = selectedCategory === "all" || module.category === selectedCategory;
    const matchesSearch = searchTerm === "" || 
      module.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
      module.description.toLowerCase().includes(searchTerm.toLowerCase()) ||
      (module.features && module.features.some(f => f.toLowerCase().includes(searchTerm.toLowerCase())));
    return matchesCategory && matchesSearch;
  });

  return (
    <div className="min-h-screen bg-gray-50 py-8">
      <div className="container mx-auto px-4 max-w-7xl">
        <div className="text-center mb-8">
          <h1 className="text-3xl font-bold text-gray-900 mb-4">
            {allModulesFinal.length}+ готовых модулей
          </h1>
          <p className="text-gray-600">
            Выбирайте и комбинируйте нужные функции для вашего приложения в Telegram
          </p>
        </div>

        <div className="mb-8">
          <div className="relative flex-1 max-w-md mx-auto">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" />
            <Input
              placeholder="Поиск модулей по названию или функции..."
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              className="pl-10"
            />
          </div>
        </div>

        <div className="grid lg:grid-cols-12 gap-8">
          <div className="lg:col-span-3">
            <Card className="sticky top-24">
              <CardHeader>
                <CardTitle className="text-lg flex items-center">
                  <Filter className="w-5 h-5 mr-2" />
                  Категории
                </CardTitle>
              </CardHeader>
              <CardContent>
                <div className="space-y-2">
                  <Button
                    variant={selectedCategory === "all" ? "default" : "ghost"}
                    className={`w-full justify-between ${selectedCategory === "all" ? "bg-telegram hover:bg-telegram/90" : ""}`}
                    onClick={() => setSelectedCategory("all")}
                  >
                    <span className="flex items-center">
                      <Grid3X3 className="w-4 h-4 mr-2" />
                      Все модули
                    </span>
                    <Badge variant="secondary" className="text-xs">
                      {allModulesFinal.length}
                    </Badge>
                  </Button>

                  {uniqueCategories.map((category) => (
                    <Button
                      key={category}
                      variant={selectedCategory === category ? "default" : "ghost"}
                      className={`w-full justify-between text-left ${selectedCategory === category ? "bg-telegram hover:bg-telegram/90" : ""}`}
                      onClick={() => setSelectedCategory(category)}
                    >
                      <span className="truncate pr-2">{category}</span>
                      <Badge variant="secondary" className="text-xs">
                        {allModulesFinal.filter(m => m.category === category).length}
                      </Badge>
                    </Button>
                  ))}
                </div>
              </CardContent>
            </Card>
          </div>

          <div className="lg:col-span-9">
            <div className="mb-6">
              <div className="flex items-center mb-4">
                <h2 className="text-xl font-semibold text-gray-900 mr-3">
                  {selectedCategory === "all" ? "Все модули" : selectedCategory}
                </h2>
                <Badge variant="outline" className="text-telegram">
                  Найдено: {filteredModules.length}
                </Badge>
              </div>
            </div>

            <div className="grid gap-6 md:grid-cols-2 xl:grid-cols-3">
              {filteredModules.map((module) => (
                <Card 
                  key={module.id} 
                  className="overflow-hidden hover:shadow-xl transition-all duration-300 cursor-pointer group border-0 bg-gradient-to-br from-white to-gray-50/80"
                  onClick={() => {
                    setSelectedModule(module);
                    setIsModalOpen(true);
                  }}
                >
                  <div className="relative">
                    <div className="h-32 bg-gradient-to-br from-telegram/10 via-blue-50 to-indigo-50 flex items-center justify-center group-hover:scale-105 transition-transform duration-300">
                      <div className="w-16 h-16 bg-white/90 rounded-2xl shadow-lg flex items-center justify-center">
                        {getModuleIcon(module.title, module.category)}
                      </div>
                    </div>

                    <div className="p-5">
                      <h3 className="font-bold text-gray-900 group-hover:text-telegram transition-colors text-base line-clamp-2 leading-tight h-12">
                        {module.title}
                      </h3>

                      <p className="text-sm text-gray-600 my-4 line-clamp-3 leading-relaxed h-[60px]">
                        {module.description}
                      </p>

                      <div className="flex items-center justify-between">
                        <Badge variant="outline" className="text-xs bg-telegram/5 text-telegram border-telegram/20">
                          {module.category.split(' ')[0]}
                        </Badge>
                        <div className="flex items-center gap-1 text-telegram opacity-70 group-hover:opacity-100 transition-opacity">
                          <span className="text-xs font-medium">Подробнее</span>
                          <ArrowRight className="w-3 h-3" />
                        </div>
                      </div>
                    </div>
                  </div>
                </Card>
              ))}

              {filteredModules.length === 0 && (
                <div className="col-span-full text-center py-12">
                  <p className="text-gray-500">
                    Модули не найдены. Попробуйте изменить поисковый запрос или категорию.
                  </p>
                </div>
              )}
            </div>
          </div>
        </div>

        {selectedModule && (
          <ModuleModal
            module={selectedModule}
            isOpen={isModalOpen}
            onClose={() => {
              setIsModalOpen(false);
              setSelectedModule(null);
            }}
          />
        )}
      </div>
    </div>
  );
}